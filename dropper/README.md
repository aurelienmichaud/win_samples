# Dropper

## dowloader.cpp
This is the final source code that we want to be executed. This source code :
	- Download a remote file
	- Store that file as a binary dump inside a Registry Key (HKEY_CURRENT_USER\SORTWARE\Malware)

## Malware1.exe
It's the compiled version of the dowloader.cpp file

## make_dropper.py
This is a Python script that generates the dropper.cpp source code. The way Malware1.exe is stored inside dropper.cpp is that it is stored into multiple ```unsigned char``` buffers.

Why ?

Because when the compiler of Visual Studio sees a table initialization that looks like the following :

```
unsigned char buf[] = "...................." \
	".............................."\
	
	...

	"..............................." \
```

it stops initializing the table once it reaches a maximum size which seems to be 0xC00. After that, all the remaining bytes that will be NULL bytes. And the trick of separating the dump into
multiple smaller (less than 0xC00) tables seems to be working fine.

So, this script :
	- Xor the Malware1.exe file with a key (0x35 for example).
	- Generate the dropper.cpp source file.

## dropper.cpp

This is the file generated by the Python script make_dropper.py. This source code :
	- contains Malware1.exe dump xored with a one-byte key
	- un-xor that Malware1.exe dump stored into multiple buffers
	- Write this un-xored EXE dump into a file
	- Install some persistence features (HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Run)
	- Launch the newly-created EXE file
	


